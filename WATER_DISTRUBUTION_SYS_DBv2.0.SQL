
drop database if exists PROJECT;
 
 
create database PROJECT;
USE PROJECT;
DROP TABLE IF EXISTS USERS;
 
 CREATE TABLE USERS(
 NAME VARCHAR (50),
 PASSWORD VARCHAR(50),
 ROLE VHARCHAR(50)
 );


 
DROP TABLE IF EXISTS RESERVOIR ;

create table RESERVOIR(
 RESERVOUIR_ID varchar(50),
 AREA varchar(50),
 MAX_CAPACITY varchar(50),
 WATER_LEVEL varchar(50),
 CHLORINE_LEVEL varchar(50),
 TIME_RES DATE
);






DROP TABLE IF EXISTS TELEINDICATION;
CREATE TABLE TELEINDICATION(
TAGID VARCHAR(50),
TAGNAME VARCHAR(50),
TAGTYPE VARCHAR(50),
RESERVIOURID VARCHAR(50),
LOCATION VARCHAR(50),
ALARM VARCHAR(50),
EVENT VARCHAR(50)
);

DROP TABLE IF EXISTS TELEMEASURAND;
CREATE TABLE TELEMEASURAND(
TAGID VARCHAR(50),
TAGNAME VARCHAR(50),
PARAMETER VARCHAR(50),
LOWLEVEL VARCHAR(50),
HIGHLEVEL VARCHAR(50),
TAGTYPE VARCHAR(50),
RESERVIOURID VARCHAR(50),
LOCATION VARCHAR(50),
ALARM VARCHAR(50),
EVENT VARCHAR(50)
);


CREATE TABLE dynamic_value (
reserviourid varchar(50),
inletflow varchar(50),
outletflow varchar(50),
waterlevel varchar(50),
chlorinelevel varchar(50),
primary key(reserviourid)
);
SHOW TABLES;

insert into dynamic_value values
(1,70,50,100,0.6),
(2,70,50,100,0.6);

INSERT INTO users VALUES
(PMANOJ,1234,DATABASE DEGINER),
(JINAL,1234,ANALYSIER),
(VISHAL,1234,DEVELOPER),
(SHASHWAT,1234,ADMINSTRATOR),
(VISHAL,1234,GRAHPIC DEGINER);

INSERT INTO  RESERVOIR VALUES
(1,DOMESTIC,2000,800,4,8.0)
(2,COMMERCIAL,2000,800,5,12.0)
(3,INDUSTRIAL,3000,800,6,4.0); 
 


SET GLOBAL event_scheduler = ON;


Drop event if exists e;

CREATE EVENT e
    
ON SCHEDULE
      
EVERY 3 SECOND
    
DO

UPDATE project.dynamic_value SET InletFlow =  FLOOR(RAND() * (100 - 50 + 1)) + 50,OutletFlow =  FLOOR(RAND() * (100 - 50 + 1)) + 50,waterlevel  =  FLOOR(RAND() * (100 - 50 + 1)) + 50,chlorinelevel =  FLOOR(RAND() * (7- 3 + 1)) + 3 where reserviourid=1;
